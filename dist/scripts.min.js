let pokemonRepository=function(){let e=[],t=["name","height","types","abilities","detailsUrl","imageUrl"],o=["height","types","abilities","sprites"],n=0;function r(o){if("object"!=typeof o||null===o){console.error("Only objects can be added to pokemonList!");return}if(!Object.keys(o).every(e=>t.includes(e))){console.error("Invalid Pok\xe9mon object: Incorrect keys.");return}e.push(o)}function i(){return e}function s(){let e=document.querySelector(".loading-message");e.classList.remove("hidden")}function a(){let e=document.querySelector(".loading-message");e.classList.add("hidden")}function l(e){return s(),fetch(e.detailsUrl).then(e=>e.json()).then(t=>{let n=Object.keys(t);if(!o.every(e=>n.includes(e))){console.error("API response is missing required Pok\xe9mon details.");return}return e.imageUrl=t.sprites.front_default,e.height=t.height/10,e.types=t.types.map(e=>e.type.name),e.abilities=t.abilities.map(e=>e.ability.name),a(),e}).catch(function(e){a(),console.error(e)})}function p(e){l(e).then(()=>{let t=document.querySelector(".modal-title"),o=document.querySelector(".modal-body");t.textContent="",o.innerHTML="",t.textContent=`${e.name} details`;let n=document.createElement("img");n.src=e.imageUrl,n.alt=`${e.name} default image`;let r=document.createElement("p");r.innerText=`Height: ${e.height}
             Types: ${e.types.join(", ")}
             Abilities: ${e.abilities.join(", ")}`,o.appendChild(n),o.appendChild(r)})}return{add:r,getAll:i,getOne:function t(o){let n=e.filter(e=>e.name===o),r=n[0];return r},addListItem:function e(t){let o=document.createElement("li"),n=document.createElement("button");return o.classList.add("list-group-item"),n.classList.add("btn","btn-primary","w-100"),n.textContent=t.name,n.setAttribute("data-bs-toggle","modal"),n.setAttribute("data-bs-target","#pokemonModal"),n.addEventListener("click",()=>{p(t)}),o.appendChild(n),o},showDetails:p,loadPage:function t(o){s();let n=15;return o+15>150&&(n=150-o),e=[],fetch(`https://pokeapi.co/api/v2/pokemon/?limit=${n}&offset=${o}`).then(e=>e.json()).then(t=>(t.results.forEach(e=>{r({name:e.name.charAt(0).toUpperCase()+e.name.slice(1),detailsUrl:e.url})}),a(),e)).catch(function(e){a(),console.error(e)})},loadDetails:l,getCurrentOffset:()=>n,getPageSize:()=>15,getPokemonCount:()=>150,setCurrentOffset(e){n=e}}}();const pokemonRoster=document.querySelector("#pokemonList"),nextButton=document.querySelector(".next-button"),prevButton=document.querySelector(".prev-button");function renderPage(e){pokemonRepository.loadPage(e).then(()=>{if(!pokemonRoster){console.error("Pok\xe9mon list container not found.");return}pokemonRoster.innerHTML="",pokemonRepository.getAll().forEach(e=>{let t=pokemonRepository.addListItem(e);pokemonRoster.appendChild(t)}),prevButton.classList.toggle("hidden",0===e),nextButton.classList.toggle("hidden",e+pokemonRepository.getPageSize()>=pokemonRepository.getPokemonCount())}).catch(function(e){console.error(e)})}renderPage(0),nextButton.addEventListener("click",()=>{let e=pokemonRepository.getCurrentOffset(),t=pokemonRepository.getPageSize(),o=pokemonRepository.getPokemonCount();if(e+t<o){let n=e+t;pokemonRepository.setCurrentOffset(n),renderPage(n)}}),prevButton.addEventListener("click",()=>{let e=pokemonRepository.getCurrentOffset(),t=pokemonRepository.getPageSize();if(e>0){let o=e-t;pokemonRepository.setCurrentOffset(o),renderPage(o)}});